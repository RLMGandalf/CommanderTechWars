<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<noloc><title>UberBar</title></noloc>

<script src="coui://ui/main/shared/js/common.js" type="text/javascript"></script>
<script src="coui://ui/main/shared/js/jabber.js" type="text/javascript"></script>

<link href="coui://ui/main/shared/css/global.css" rel="stylesheet" type="text/css" />

<script src="coui://ui/main/shared/js/thirdparty/bootstrap-select/bootstrap-select.js" type="text/javascript"></script>
<link href="coui://ui/main/shared/js/thirdparty/bootstrap-select/bootstrap-select.css" rel="stylesheet" type="text/css" />
<link href="coui://ui/main/shared/js/thirdparty/jquery-ui-1.10.3.custom/css/alpha_theme/jquery-ui-1.10.3.custom.css" rel="stylesheet" type="text/css" />

<script src="uberbar.js" type="text/javascript"></script>
<link href="uberbar.css" rel="stylesheet" type="text/css" />

</head>
<body data-bind="click: hideContextMenu">

<!-- ko if: (model.showUberBar() && model.hasJabber()) -->

<!-- ko if: showUserDetails -->
<div style="color: #fff; background-color: black; border: 1px solid white; display: none" data-bind="visible: true"><loc data-i18n="uberbar:users.message" desc="">Users</loc>
    <div data-bind="foreach: { data: users, as: 'contact' }">       
        <div>
            <span data-bind="text: contact.displayName"></span>:
            <span data-bind="text: contact.presenceType"></span>:
            <span data-bind="text: contact.status"></span>:

            <span>
                <loc data-i18n="uberbar:_tags.message" desc="">[Tags:</loc>
                <span data-bind="foreach: { data: contact.tagList, as: 'tag' }">
                    <span data-bind="text: tag"></span>
                </span>
                ]
            </span>
            <br />

            <span data-bind="click: function () { model.startConversationsWith($data.uberId()) }"><loc data-i18n="uberbar:_chat.message" desc="">[CHAT]</loc></span>
            <br />

            <span data-bind="click: function () { contact.addTag('FRIEND') }" ><loc data-i18n="uberbar:_f.message" desc="">[F]</loc></span>
            <span data-bind="click: function () { contact.addTag('IGNORED') }"><loc data-i18n="uberbar:_i.message" desc="">[I]</loc></span>
            <span data-bind="click: block"><loc data-i18n="uberbar:_b.message" desc="">[B]</loc></span>
            <span data-bind="click: function () { contact.removeTag('FRIEND') }" ><loc data-i18n="uberbar:_f.message" desc="">[/F]</loc></span>
            <span data-bind="click: function () { contact.removeTag('IGNORED') }"><loc data-i18n="uberbar:_i.message" desc="">[/I]</loc></span>
            <span data-bind="click: unblock"><loc data-i18n="uberbar:_b.message" desc="">[/B]</loc></span>
            <span data-bind="click: contact.remove"><loc data-i18n="uberbar:_remove.message" desc="">[REMOVE]</loc></span>
            <br/>
        </div>
    </div>
</div>
<!-- /ko -->

<!--- SOCIAL BAR --->
<div class="div-social-bar" style="display: none" data-bind="visible: true">
    <div class="div-social-bar-menu">
        <div class="div-social-bar-item div-clock">
            <div class="clock" data-bind="text: time"></div>
        </div>
        <div class="div-social-bar-item div-social-bar-menu-item div-social-btn btn_std_ix"
            data-bind="click: togglePinSocialWidget, css: { 'btn_std_ix_active': showSocialWidget }">
            <div class="item-social">
                <img class="icon" src="img/icon_social.png" />
                <div class="count">
                    (<span class="contacts-online" data-bind="text: onlineFriendsCount"></span>)
                </div>
            </div>
        </div>
        <div class="div-social-bar-item div-social-bar-menu-item div-notifications-btn btn_std_ix"
            data-bind="click: toggleShowOldNotifications, css: { 'btn_std_ix_active': showOldNotifications }">
            <div class="item-social">
                <img class="icon" src="img/icon_notifications.png" style="margin-top:-1px;" />
                <!-- ko if: notificationCount -->
                <div class="count" style="margin: 5px 0px 0px -3px;">
                    (<span class="pending-notifications" data-bind="text: notificationCount"></span>)
                </div>
                <!-- /ko -->
            </div>
        </div>
    </div>
</div>

<div class="div-social-canvas" style="display: none" data-bind="visible: true">
      <!---CONTACTS CONTEXT MENU---->
        <div id="contextMenu" class="dropdown clearfix contacts">
            <!-- ko with: selectedContact -->
            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;">
                <!-- ko if: friend && online -->
                <li><a data-bind="click: startChat" tabindex="-1"  href="#"><span class="menu-action"><loc data-i18n="uberbar:chat.message" desc="">Chat</loc></span></a></li>
                <!-- /ko -->
                <!-- ko if: (!friend() && !blocked()) -->
                <li><a data-bind="click: sendFriendRequest" tabindex="-1" href="#"><span class="menu-action"><loc data-i18n="uberbar:send_friend_request.message" desc="">Send Friend Request</loc></span></a></li>
                <!-- /ko -->
                <!-- ko if: (!friend() && !blocked()) -->
                <li><a data-bind="click: sendChatInvite" tabindex="-1" href="#"><span class="menu-action"><loc data-i18n="uberbar:invite_to_chat.message" desc="">Invite to Chat</loc></span></a></li>
                <!-- /ko -->
                <!-- ko if: (model.readyToSendLobbyInfo()) -->
                <li><a data-bind="click: sendInviteToGame" tabindex="-1" href="#"><span class="menu-action"><loc data-i18n="uberbar:invite_to_game.message" desc="">Invite to game</loc></span></a></li>
                <!-- /ko --> 
                <!--<li><a data-bind="click: viewProfile" tabindex="-1" href="#"><span class="menu-action">View profile</span></a></li>-->
                <!-- ko if: friend -->
                <li><a data-bind="click: sendUnfriend" tabindex="-1" href="#"><span class="menu-action"><loc data-i18n="uberbar:unfriend.message" desc="">Unfriend</loc></span></a></li>
                <!-- /ko -->
                <li><a data-bind="click: remove" tabindex="-1" href="#"><span class="menu-action"><loc data-i18n="uberbar:remove.message" desc="">Remove</loc></span></a></li>
                <!-- ko ifnot: blocked -->
                <li><a data-bind="click: block" tabindex="-1" href="#"><span class="menu-action"><loc data-i18n="uberbar:block.message" desc="">Block</loc></span></a></li>
                <!-- /ko -->
                <!-- ko if: blocked -->
                <li><a data-bind="click: unblock" tabindex="-1" href="#"><span class="menu-action"><loc data-i18n="uberbar:unblock.message" desc="">Unblock</loc></span></a></li>
                <!-- /ko -->
                <!--<li><a data-bind="click: report" tabindex="-1" href="#"><span class="menu-action">Report</span></a></li>-->
            </ul>
            <!-- /ko -->
        </div>

    <div class="div-social-canvas-panel" style="width:250px;">
        <!--- SOCIAL WIDGET --->
        <!-- ko if: showSocialWidget -->
        <div class="div-win" style="float:right;">
            <div class="div-social-widget">
                <div style="margin:-6px 0px 12px 0px;">
                    <div class="btn_win btn_win_min" style="float: right;" data-bind="click: togglePinSocialWidget"></div>
                </div>
                <!---USER CONTAINER---->
                <div class="div-user-profile-container" >
                    <div class="fill">
                        <div class="user-profile-controls">
                            <div class="div-user-profile-status status-picker">
                                <select data-bind="selectPicker: jabberPresenceType">
                                    <option data-content="<div class='status-visual online'></div><span class='status-label'>Online</span>" value="available"><loc data-i18n="uberbar:online.message" desc="">Online</loc></option>
                                    <option data-content="<div class='status-visual away'></div><span class='status-label'>Away</span>" value="away"><loc data-i18n="uberbar:away.message" desc="">Away</loc></option>
                                    <option data-content="<div class='status-visual dnd'></div><span class='status-label'>Do Not Disturb</span>" value="dnd"><loc data-i18n="uberbar:do_not_disturb.message" desc="">Do Not Disturb</loc></option>
                                    <option data-content="<div class='status-visual offline'></div><span class='status-label'>Appear Offline</span>" value="unavailable"><loc data-i18n="uberbar:appear_offline.message" desc="">Appear Offline</loc></option>                                     
                                    <option data-divider="true"></option>
                                    <option value="change_name"><loc data-i18n="uberbar:change_display_name.message" desc="">Change Display Name</loc></option>
                                </select>
                            </div>
                            <div class="lbl-user-profile-btn" data-bind="text: displayName"></div>
                            <form data-bind="submit: function () { }">
                                <input type="text" class="input-text-req-focus input-psm" placeholder="Enter a status message" maxlength="144" data-bind="value: jabberPresenceStatus"/> 
                            </form>
                        </div>
                    </div>
                </div>
                <!---CONTACTS CONTAINER---->
                <div class="div-contacts-cont">
                    <div class="div-tab-controls-cont">
                        <ul id="contacts-tabs" class="nav nav-tabs">
                            <li class="active">
                                <a href="#friends-pane" 
                                   data-toggle="tab"
                                   data-bind="click_sound: 'default', rollover_sound: 'default'"><loc data-i18n="uberbar:friends.message" desc="">Friends</loc></a>
                            </li>
                            <li>
                                <a href="#contacts-pane" 
                                   data-toggle="tab"
                                   data-bind="click_sound: 'default', rollover_sound: 'default'"><loc data-i18n="uberbar:recent.message" desc="">Recent</loc></a>
                            </li>
                        </ul>
                    </div>

                    <script type="text/html" id="contact-template">
                        <div class="contact-item" data-bind="event: { click: startChatIfOnline, contextmenu: model.contextMenuForContact }">
                            <!-- ko if: friend -->
                            <div>
                                <div class="status-visual" data-bind="css: { 'online': available, 'offline': offline, 'away': away, 'dnd': dnd }"></div>
                                <div class="status-username" data-bind="text: displayName"></div>
                            </div>
                            <div class="status-psm" data-bind="text: status"></div>
                            <!-- /ko -->

                            <!-- ko ifnot: friend -->
                            <div class="status-username nofriend" data-bind="text: displayName, click: startChat">
                            </div>
                            <!-- /ko -->
                        </div>
                    </script>

                    <!---CONTACTS TABS---->
                    <div class="div-contacts-cont tab-content">
                        <!--- TABS--->

                        <div class="tab-pane active tabs-contacts" id="friends-pane">  

                            <div class="div-contact-category">               
                                <div class="category-label"><loc data-i18n="uberbar:online.message" desc="">Online</loc></div>
                                <!-- ko foreach: onlineFriends -->
                                <div data-bind="template: { name: 'contact-template', data: $data }"></div>
                                <!-- /ko -->
                            </div>

                            <div class="div-contact-category">               
                                <div class="category-label"><loc data-i18n="uberbar:offline.message" desc="">Offline</loc></div>
                                <!-- ko foreach: offlineFriends -->
                                <div data-bind="template: { name: 'contact-template', data: $data }"></div>
                                <!-- /ko -->
                            </div>                     
                        </div>

                        <div class="tab-pane tabs-contacts" id="contacts-pane">  
                            <div class="div-contact-category">               
                                <!-- ko foreach: contacts -->
                                <div data-bind="template: { name: 'contact-template', data: $data }"></div>
                                <!-- /ko -->
                            </div>
                        </div>
                    </div>               
                </div>
                <div>
                    <div class="div-seach-cont" style="padding: 1px">
                        <form data-bind="submit: function () { model.findUserId(); model.showSearchResults(true); model.contactSearch(''); }">
                            <input type="text" style="width:100%;" placeholder="Search Players" value="" class="input_text input_chat_text" data-bind="value: contactSearch" />
                        </form>
                    </div>
                </div>
                <!-- ko if: showSearchResults -->
                <div style="position:absolute; top:100px; right: 5px; width: 240px;">
                    <div class="div-search-results">  
                        <div style="padding-bottom: 8px; ">
                            <span><loc data-i18n="uberbar:search_results.message" desc="">Search Results</loc></span>
                            <div class="btn_win btn_win_close btn-chat-win-control"  style="float:right" data-bind="click: closeSearchResults"></div>
                        </div>
                        <div class="div-contact-category">               
                            <!-- ko foreach: searchResults -->
                            <div data-bind="template: { name: 'contact-template', data: $data }"></div>
                            <!-- /ko -->
                        </div>
                    </div>
                </div>
                <!-- /ko -->
            </div>
        </div>
        <!-- /ko -->
    </div>
    <div class="div-social-canvas-panel">
        <table class="tbl">
            <tbody>
                <tr>
                    <!--- CHAT WINDOWS --->
                    <!-- ko foreach: conversations -->
                    <!-- ko if: partnerDisplayName -->

                    <td style="vertical-align:bottom;">
                        <div class="div-win" style="float:right; margin:0px 10px -4px 0px;">
                        <div class="div-chat-window">
                            <div class="div-chat-header"  data-bind="css: { 'dirty': dirty } , click: toggleMinimized">
                                <div class="div-chat-username">
                                    <!-- ko with: partner -->
                                    <!-- ko if: friend -->
                                    <div class="status-visual" data-bind="css: { 'online': available, 'offline': offline, 'away': away, 'dnd': dnd }"></div>
                                    <!-- /ko -->
                                    <div class="username" data-bind="text: displayName"></div>
                                    <!-- /ko -->
                                </div>
                                <div class="div-chat-win-controls">
                                    <div class="btn_win btn_win_min btn-chat-win-control" ></div>
                                    <div class="btn_win btn_win_close btn-chat-win-control" data-bind="click: close"></div>
                                </div>
                                <!-- ko if: partner().pendingChat() -->
                                <div><loc data-i18n="uberbar:pending_invite.message" desc="">Pending Invite</loc></div>
                                <!-- /ko -->
                            </div>
                            <!-- ko ifnot: minimized -->
                            <div class="div-chat-cont">
                                <div class="div-chat-body">
                                    <!-- ko foreach: messageLog -->
                                    <div class="chat_message">
                                        <span class="chat_message_player_name" data-bind="text: name"></span>:
                                        <span class="chat-msg" data-bind="text: message"></span>
                                    </div>
                                    <!-- /ko -->
                                    <span data-bind="autoscroll: messageLog"></span>
                                </div>
                            </div>
                            <div class="div-chat-input">
                                <form data-bind="submit: sendReply">
                                    <input class="input-chat" type="text" data-bind="value: reply, disable: partner().pendingChat()"  autofocus/>
                                </form>
                            </div>
                            <!-- /ko -->
                        </div>
                        </div>
                    </td>
                    <!-- /ko -->
                    <!-- /ko -->
                </tr>
            </tbody>
        </table>


    </div>
</div>

<!--- NOTIFICATION WIDGET --->
    <!-- ko if: showNotificationWidget -->
    <div class="div-win" style="float:right; display: none" data-bind="visible: true">
        <div class="div-notification-widget">
            <div class="div-notification-cont">
                <div class="div-win-ctrl-bar">
                    <div class="btn_win btn_win_min" style="float: right;" data-bind="click: toggleShowOldNotifications"></div>
                </div>

                <!-- ko ifnot: notificationCount -->
                <div class="lbl-notification-empty">
                    <loc data-i18n="uberbar:no_pending_notifications.message" desc="">No pending notifications.</loc>
                </div>
                <!-- /ko -->

                <!-- ko foreach: visibleNotifications -->
                <!-- ko if: partnerDisplayName -->
                <div class="div-notification-item">
                    <!--- PROFILE PIC --->
                    <div class="div-user-profile-pic">
                        <img src="../shared/img/commanders/user_profile_pics/img_profile_pic_sample.png" />
                    </div>
                    <!--- DETAILS --->
                    <div class="div-notification-details">
                        <div class="div-notification-body">
                            <div class="div-notification-msg">
                                <span data-bind="text: partnerDisplayName"></span>
                                <!-- ko if: isFriendRequest -->
                                <span><loc data-i18n="uberbar:wants_to_be_your_friend.message" desc="">wants to be your friend.</loc></span>
                                <!-- /ko -->
                                <!-- ko if: isGameInvite -->
                                <span><loc data-i18n="uberbar:invited_you_to_a_game.message" desc="">invited you to a game.</loc></span>
                                <!-- /ko -->
                                <!-- ko if: isChatInvite -->
                                <span><loc data-i18n="uberbar:invited_you_to_chat.message" desc="">invited you to chat.</loc></span>
                                <!-- /ko -->
                            </div>
                        </div>
                        <!--- CONTROLS --->
                        <div class="div-notification-ctrls">
                            <div class="btn-notification btn_std_gray">
                                <div class="btn_std_label lbl-notification-btn" data-bind="click: ignore"><loc data-i18n="uberbar:ignore.message" desc="">Ignore</loc></div>
                            </div>
                            <!-- ko if: isFriendRequest -->
                            <div class="btn_std_gray btn-notification" data-bind="click: ok">
                                <div class="btn_std_label lbl-notification-btn"><loc data-i18n="uberbar:accept.message" desc="">Accept</loc></div>
                            </div>                                
                            <!-- /ko -->
                            <!-- TBA
                            <div class="btn_std_gray btn-notification" data-bind="">
                                <div class="btn_std_label lbl-notification-btn">View Profile</div>
                            </div>  
                            -->     
                            <!-- ko if: isGameInvite -->
                            <div class="btn_std_gray btn-notification" data-bind="click: ok">
                                <div class="btn_std_label lbl-notification-btn"><loc data-i18n="uberbar:join_game.message" desc="">Join Game</loc></div>
                            </div>   
                            <!-- /ko -->
                            <!-- ko if: isChatInvite -->
                            <div class="btn_std_gray btn-notification" data-bind="click: ok">
                                <div class="btn_std_label lbl-notification-btn"><loc data-i18n="uberbar:accept.message" desc="">Accept</loc></div>
                            </div>                                
                            <!-- /ko -->
                        </div>
                    </div>
                    <!--- ABUSE --->
                    <div class="div-abuse-ctrl-cont">
                        <div class="btn-abuse btn-block-user" data-bind="click: block"></div>
                        <div class="btn-abuse btn-report-user" data-bind="click: report"></div>
                    </div>
                </div>
                <!-- /ko -->
                <!-- /ko -->
            </div>
        </div>
    </div>
    <!-- /ko -->

<!-- /ko -->

<!-- Modal -->
<div class="modal fade" id="confirm" tabindex="-1" role="dialog" aria-labelledby="getPasswordLabel" aria-hidden="true" data-show="false" style="display: none">
<div class="modal-dialog">
    <div class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title"><loc data-i18n="uberbar:change_your_display_name.message" desc="">Change your display name?</loc></h4>       
    </div>
    <div class="modal-body">
        <span><loc data-i18n="uberbar:new_display_name.message" desc="">New Display Name:</loc> <input data-bind="value: newDisplayName, valueUpdate: 'afterkeydown'" /></span>
        <span style="color: red" data-bind="text: newDisplayNameError"></span>
    </div>
    <div class="modal-footer">
        <button class="btn_std" data-bind="click: finishChangeDisplayName, click_sound: 'default', rollover_sound: 'default', css: { 'disabled': isNewDisplayNameInvalid }">
            <loc data-i18n="uberbar:change.message" desc="">CHANGE</loc>
        </button>
        <button class="btn_std" data-bind="click: function () { $('#confirm').modal('hide'); model.newDisplayNameError(''); }, click_sound: 'default', rollover_sound: 'default'">
            <loc data-i18n="uberbar:cancel.message" desc="">CANCEL</loc>
        </button>
    </div>
    </div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

</body>
</html>
