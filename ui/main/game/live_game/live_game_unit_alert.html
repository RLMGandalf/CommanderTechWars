<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<noloc><title>Live Game: Unit Alert</title></noloc>
<link href="coui://ui/main/shared/css/global.css" rel="stylesheet" type="text/css" />
<link href="coui://ui/main/shared/js/thirdparty/jquery-ui-1.10.3.custom/css/alpha_theme/jquery-ui-1.10.3.custom.css" rel="stylesheet" type="text/css" />
<link href="coui://ui/main/shared/js/thirdparty/DataTables-1.9.4/media/css/jquery.dataTables.custom.css" rel="stylesheet" type="text/css" />
<link href="live_game_unit_alert.css" rel="stylesheet" type="text/css" />
<script src="coui://ui/main/shared/js/common.js" type="text/javascript"></script>

<script src="coui://ui/main/shared/js/build.js" type="text/javascript"></script>

<script src="./js/constants.js" type="text/javascript"></script>
<script src="./js/audio.js" type="text/javascript"></script>
<script src="./js/events.js" type="text/javascript"></script>
<script src="./js/triggers.js" type="text/javascript"></script>
<script src="live_game_unit_alert.js" type="text/javascript"></script>
</head>
    <body class="body_panel" data-bind="visible: (!model.isSpectator())">
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" width="0" height="0">
            <defs>
                <filter id="xfrm_green" x="0" y="0" width="100%" height="100%">
                    <feColorMatrix  result="mat2" in="SourceGraphic"
                        type="matrix"
                        values= "0  0   0   0   0
                                 0  1   0   0   0
                                 0  0   0   0   0
                                 1  1  -1   1   0" />
                </filter>
                <filter id="xfrm_red" x="0" y="0" width="100%" height="100%">
                    <feColorMatrix  result="mat2" in="SourceGraphic"
                        type="matrix"
                        values= "0  1   0   0   0
                                 0  0   0   0   0
                                 0  0   0   0   0
                                 1  1  -1   1   0" />
                </filter>
                <filter id="xfrm_black" x="0" y="0" width="100%" height="100%">
                    <feColorMatrix  result="mat2" in="SourceGraphic"
                        type="matrix"
                        values= "0  .2   0   0   0
                                 0  .2   0   0   0
                                 0  .2   0   0   0
                                 1  1  -1   1   0" />
                </filter>
                <filter id="xfrm_white" x="0" y="0" width="100%" height="100%">
                    <feColorMatrix  result="mat2" in="SourceGraphic"
                        type="matrix"
                        values= "0  1   0   0   0
                                 0  1   0   0   0
                                 0  1   0   0   0
                                 1  1  -1   1   0" />
                </filter>

                <filter id="maskfilter">
                    <feColorMatrix in="SourceAlpha" type="matrix" 
                                   values="0 0 0 1 0
                                           0 0 0 1 0
                                           0 0 0 1 0
                                           0 0 0 1 0"></feColorMatrix>
                </filter>

                <mask id="player-mask">
                    <image width="12px" height="12px" xlink:href="img/players_list_panel/icon_player_fill.png" filter="url(#maskfilter)"></image>
                </mask>
            </defs>
        </svg>

        <!-- ko foreach: alerts -->
        
        <!-- ko if: $index() === 0 -->
        <div class="div_unit_alert" style="margin-left: 0px"
            data-bind="click: function () { $parent.acknowledge($data.id) },
                        event: {
                            mouseenter: function () { $parent.showPreview($data.id); },
                            mouseleave: function () { $parent.hidePreview(); },
                            contextmenu: function () { $parent.showPreview($data.id, 'pips[0]'); }
                        },
                        css: {
                            div_unit_alert_commander: $data.watch_type === constants.watch_type.damage,
                            div_animated_flash_red: $data.watch_type === constants.watch_type.damage,
                            div_unit_alert_ready: $data.watch_type === constants.watch_type.ready,
                            div_animated_flash_green: $data.watch_type === constants.watch_type.ready,
                            div_unit_alert_death: $data.watch_type === constants.watch_type.death,
                            div_animated_flash_black: $data.watch_type === constants.watch_type.death,
                            div_unit_alert_misc: ($parent.isMisc($data.watch_type)),
                            div_animated_flash_white: ($parent.isMisc($data.watch_type))
                        }">
            <div class="div_unit_alert_container">
            <div class="icon_alert svgfilter">
                <img style="height:52px; width:52px;" data-bind="attr: { src: $data.sicon }"></img>
            </div>
            <div class="container" style="height: auto; max-width: 290px; min-width: 233px; width: auto; flex-grow: 1; padding: 0;">
                <div class="text_alert">
                    <div class="text_center">

                            <!-- ko if: $data.watch_type === constants.watch_type.allied_death -->
                            <span>
                                <loc data-i18n="live_game_unit_alert:allied.message" desc="">Allied</loc>
                            </span>
                            <!-- /ko -->

                            <span class="unit" data-bind="text: $data.name"> <!--style="width: 32px; height: 32px;"--></span>

                            <!-- ko if: $data.watch_type === constants.watch_type.commander -->
                            <span class="event">
                                <loc data-i18n="live_game_unit_alert:under_attack.message" desc="">under attack.</loc>
                            </span>
                            <!-- /ko -->

                            <!-- ko if: $data.watch_type === constants.watch_type.ready -->
                            <span class="event">
                                <loc data-i18n="live_game_unit_alert:ready.message" desc="">ready.</loc>
                            </span>
                            <!-- /ko -->

                            <!-- ko if: $data.watch_type === constants.watch_type.death -->
                            <span class="event">
                                <loc data-i18n="live_game_unit_alert:lost.message" desc="">lost.</loc>
                            </span>
                            <!-- /ko -->

                            <!-- ko if: $data.watch_type === constants.watch_type.sight -->
                            <span class="event">
                                <loc data-i18n="live_game_unit_alert:located.message" desc="">located.</loc>
                            </span>
                            <!-- /ko -->

                            <!-- ko if: $data.watch_type === constants.watch_type.ping -->                                                  
                                <!-- ko ifnot: $data.custom -->
                                <span data-bind="text: name"></span>
                                <!-- /ko -->
                                <!-- ko ifnot: $data.custom -->
                                <span>
                                    <loc data-i18n="live_game_unit_alert:ping.message" desc="">Ping!</loc>
                                </span>
                                <!-- /ko -->                                         
                            <!-- /ko -->

                            <!-- ko if: $data.watch_type === constants.watch_type.projectile -->  
                            <span>
                                <loc data-i18n="live_game_unit_alert:launched.message" desc="">launched!</loc>
                            </span>
                            <!-- /ko -->

                            <!-- ko if: $data.watch_type === constants.watch_type.first_contact -->  
                            <span>
                                <loc data-i18n="live_game_unit_alert:enemy_contact.message" desc="">Enemy Contact!</loc>
                            </span>
                            <!-- /ko -->

                            <!-- ko if: $data.watch_type === constants.watch_type.target_destroyed -->  
                            <span>
                                <loc data-i18n="live_game_unit_alert:destroyed.message" desc="">destroyed.</loc>
                            </span>
                            <!-- /ko -->

                            <!-- ko if: $data.watch_type === constants.watch_type.allied_death -->
                            <span>
                                <loc data-i18n="live_game_unit_alert:lost.message" desc="">lost.</loc>
                            </span>
                            <!-- /ko -->

                            <span data-bind="text: $data.fade"></span>

                    </div>
                </div>
            </div>
            </div>
            <div class="close" data-bind="click: function () { $parent.close($data.id) }, clickBubble: false"></div>
        </div>
        <!-- /ko -->

        <!-- ko if: $index() > 0 -->
        <div class="div_unit_alert"
            data-bind="click: function () { $parent.acknowledge($data.id) },
                        event: {
                            contextmenu: function () { $parent.showPreview($data.id, 'pips[0]'); }
                        },
                        css: {
                            div_unit_alert_commander: $data.watch_type === constants.watch_type.damage,
                            div_animated_flash_red: $data.watch_type === constants.watch_type.damage,
                            div_unit_alert_ready: $data.watch_type === constants.watch_type.ready,
                            div_animated_flash_green: $data.watch_type === constants.watch_type.ready,
                            div_unit_alert_death: $data.watch_type === constants.watch_type.death,
                            div_animated_flash_black: $data.watch_type === constants.watch_type.death,
                            div_unit_alert_misc: ($parent.isMisc($data.watch_type)),
                            div_animated_flash_white: ($parent.isMisc($data.watch_type))
                        }">
            <div class="icon_alert svgfilter">
                <img src="" data-bind="attr: { src: $data.sicon }"></img>
            </div>
            <div class="close" data-bind="click: function () { $parent.close($data.id) }, clickBubble: false"></div>
        </div>
        <!-- /ko -->
        
        <!-- /ko -->
    </body>
</html>
