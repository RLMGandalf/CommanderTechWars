<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <noloc><title>Galactic War: Play</title></noloc>
    <script src="coui://ui/main/shared/js/common.js" type="text/javascript"></script>
    <link href="coui://ui/main/shared/css/global.css" rel="stylesheet" type="text/css" />
    <link href="gw_play.css" rel="stylesheet" type="text/css" />
    <script src="coui://ui/main/game/galactic_war/shared/js/gw_common.js"></script>
    <script src="coui://ui/main/game/galactic_war/shared/js/easeljs-0.7.1.min.js"></script>
    <script src="gw_play.js" type="text/javascript"></script>
</head>

<body>
    
<script id="cardTemplate">
    app.loadTemplate("coui://ui/main/game/galactic_war/shared/template/gwt_card");
</script>
    
<div class="container">

    <canvas id="galaxy-map" height="800" width="800" data-bind="attr: {height: galaxy.canvasHeight(), width: galaxy.canvasWidth() }"></canvas>

    <div id="side-bar" class="ignoremouse" data-bind="visible: showSideBar" style="display: none">
        <div class="attendmouse center">
            <div class="div_game_menu_panel">
                <div class="div_game_menu_frame">
                    <div class="div_game_menu">
                        <div class="div_game_menu_cont">
                            <div class="div_game_menu_item" data-bind="click: menuSettings, click_sound: 'default', rollover_sound: 'default'">
                                <loc data-i18n="gw_play:settings.message" desc="">Settings</loc>
                            </div>
                            <div class="div_game_menu_item" data-bind="click: exitGame, click_sound: 'default', rollover_sound: 'default'">
                                <loc data-i18n="gw_play:save.message" desc="">Save</loc> & <loc data-i18n="gw_play:exit.message" desc="">Exit</loc>
                            </div>
                            <div class="div_game_menu_item" data-bind="click: abandonGame", click_sound: 'default', rollover_sound: 'default'">
                                <loc data-i18n="gw_play:abandon_war.message" desc="">Abandon War</loc>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
        
    <div id="selected-system-anchor" class="ignoremouse" data-bind="visible: selection" style="display: none">
        <div class="below">
            <div class="attendmouse btn_hero jump" data-bind="click: move, click_sound: '/SE/UI/UI_GW_Jump', rollover_sound: 'default', visible: displayMove">
                <div class="btn_label">
                    <loc data-i18n="gw_play:jump.message" desc="">Jump</loc>
                </div>
            </div>
            <div class="attendmouse btn_hero fight" data-bind="click: fight, click_sound: 'default', rollover_sound: 'default', visible: displayFight">
                <div class="btn_label">
                    <loc data-i18n="gw_play:fight.message" desc="">Fight</loc>
                </div>
            </div>
            <div class="attendmouse btn_hero explore" data-bind="click: explore, click_sound: 'default', rollover_sound: 'default', visible: displayExplore">
                <div class="btn_label">
                    <loc data-i18n="gw_play:explore.message" desc="">Explore</loc>
                </div>
            </div>
        </div>
    </div>

    <div id="header" class="ignoremouse">
        <div id="system-detail" class="attendmouse" data-bind="visible: selection" style="display: none">
            <div class="system-display" data-bind="visible: selection.system, with: selection.system">
                <!-- ko if: $data.html() -->
                <div data-bind="html: html"></div>
                <!-- /ko -->
                <!-- ko if: !$data.html() -->
                <div class="system-name" data-bind="text: name"></div>
                <div class="content">
                    <div class="planets" data-bind="visible: $root.showSelectionPlanets">
                        <div class="all-planets" data-bind="foreach: planets">
                            <img style="height:20px; width:20px;" data-bind="attr: { src: 'coui://ui/main/shared/img/planets/' + $data.generator.biome + '.png' }" />
                        </div>
                    </div>
                    <div class="description" data-bind="text: loc(description())"></div>
                </div>
                <!-- /ko -->
            </div>

            <div data-bind="visible: launchingFight" style="display:none"><loc data-i18n="gw_play:preparing_for_battle.message" desc="">Preparing for battle</loc></div>
        </div>
        <div id="header-center" class="ignoremouse">
        </div>
    </div>

    <div id="footer" class="ignoremouse">
        <div id="hover-card" data-bind="visible: !!model.hoverCard()" style="display:none">
            <div class="card" data-bind="with: hoverCard">
                <div class="close" data-bind="click: function () { model.setHoverCard(undefined); }, click_sound: 'default', rollover_sound: 'default'">
                </div>
                <!-- ko template: 'cardTemplate' -->
                <!-- /ko -->
                <!-- ko if: !isEmpty() -->
                <div class="card_action">
                    <div class="btn_neg discard" data-bind="click: model.discardHoverCard">
                        <div class="btn_label" style="font-size:16px;"><loc data-i18n="gw_play:delete_tech.message" desc="">Delete Tech</loc></div>
                    </div>
                </div>
                <!-- /ko -->
            </div>
        </div>
        <div id="tech_bar_cont" style="margin:0px auto;">        
            <div id="inventory" class="attendmouse wrap" data-bind="visible: cards().length" style="display:none">

                <div class="scroll-container">

                    <div class="content">
                        <!-- ko foreach: cards -->
                        <div class="one-card btn_slot"
                            data-bind="
                                visible: visible,
                                click: model.setHoverCard,
                                click_sound: 'default',
                                rollover_sound: 'default'
                                "
                            style="display: none">
                            <img class="icon" data-bind="visible: icon, attr: { src: icon }" />
                        </div>
                        <!-- /ko -->
                    </div>

                </div>

            </div>
            <div class="div_build_bar_tab_cont receiveMouse">
                <div class="div_build_bar_tab_background">
                    <div class="div_build_bar_tab_background_inner">
                        <div class="tab_grp">
                            <span class="tab_grp_body">
                                <span class="span_build_bar_tab">
                                    <span class="span_build_bar_tab_label"><loc data-i18n="gw_play:techs.message" desc="">TECHS</loc></span>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="body-center" class="ignoremouse">
        <div id="system-card" class="attendmouse card" data-bind="visible: showSystemCard" style="display: none">
            <!-- ko with: currentSystemCard -->
                <!-- ko template: 'cardTemplate' -->
                <!-- /ko -->
            <!-- /ko -->
            <div class="exploring card_action" data-bind="visible: exploring" style="display:none">
                <!-- ko if: canTakeCard -->
                <div class="btn_hero" data-bind="click: win, click_sound: '/SE/UI/UI_GW_Download_Tech', rollover_sound: 'default'">
                    <!-- ko with: currentSystemCard() -->
                        <!-- ko if: !isLoadout() -->
                            <div class="btn_label"><loc data-i18n="gw_play:download_tech.message" desc="">Download Tech</loc></div>
                        <!-- /ko -->
                        <!-- ko if: isLoadout() -->
                            <div class="btn_label"><loc data-i18n="gw_play:unlock_commander.message" desc="">Unlock Commander</loc></div>
                        <!-- /ko -->
                    <!-- /ko -->
                </div>
                <!-- /ko -->
                <!-- ko if: !canTakeCard() -->
                    <div class="warning" data-bind="html: loc(rejectReason())"></div>
                    <!-- ko if: rejectIsBad -->
                    <div class="btn_neg" data-bind="click: win, click_sound: 'default', rollover_sound: 'default'">
                        <div class="btn_label"><loc data-i18n="gw_play:reject_tech.message" desc="">Reject Tech</loc></div>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: !rejectIsBad() -->
                    <div class="btn_std" data-bind="click: win, click_sound: 'default', rollover_sound: 'default'">
                        <div class="btn_label"><loc data-i18n="gw_play:dismiss.message" desc="">Dismiss</loc></div>
                    </div>
                    <!-- /ko -->
                    <div class="warning-desc" data-bind="html: loc(rejectReasonDesc())"></div>
                <!-- /ko -->
            </div>
        </div>
        <div id="scanning" class="attendmouse" data-bind="visible: scanning" style="display:none">
            <img src="coui://ui/main/shared/img/loading.gif" />
            <span style="margin: 0px 20px;">
                <loc data-i18n="gw_play:scanning_system.message" desc="">Scanning System</loc>
            </span>
        </div>
    </div>

    <div class="bottom-bar"></div>

    <div class="popup-container"></div>

    <!--Testing-->
    <div id="test-panel" class="wrap" data-bind="visible: devMode" style="display: none">
        <div class="close" data-bind="
            click: function(event) { $('#test-panel .close-target').toggle(); },
            click_sound: 'default',
            rollover_sound: 'default'
        "></div>
        <div class="close-target" style="display: none">
            <!-- ko with: model.cheats -->
            <div class="no-fog" data-bind="click: function() { model.cheats.noFog(!model.cheats.noFog()); }"></div>
            <div class="jump" data-bind="click: function() { model.cheats.jump(model, model.selection.star()); }"></div>
            <div class="test-cards" data-bind="click: function() { model.cheats.testCards(model.game()); }"></div>
            <br />
            <form data-bind="submit: function() { model.cheats.giveCard(model.game()); }">
                <label for="test-give-card-id"><loc data-i18n="gw_play:give_tech.message" desc="">Give tech</loc></label>
                <input id="test-give-card-id" data-bind="value: giveCardId"></input>
                <input type="submit" class="give-card" data-bind="click: function() { model.cheats.giveCard(model.game()); }"></input>
            </form>
            <form data-bind="submit: function() { model.cheats.loadGame(model.game()); }">
                <label for="load-game-text"><loc data-i18n="gw_play:load_game.message" desc="">Load game</loc></label>
                <textarea type="area" id="load-game-text" data-bind="value: loadGameText"></textarea>
                <input type="submit" class="load-game" title="Load game" data-bind="click: function() { model.cheats.loadGame(model.game()); }"></input>
            </form>
            <!-- /ko -->
            <br />

            <div class="btn_hero" data-bind="click: function(model, event) { fight(model, event, true); }, click_sound: 'default', rollover_sound: 'default', visible: canFight">
                <div class="btn_label">
                    <noloc>Cheat</noloc>
                </div>
            </div>

            <div data-bind="visible: fighting">
                <div class="btn_hero" data-bind="click: win, click_sound: 'default', rollover_sound: 'default'">
                    <div class="btn_label">
                        <noloc>Win</noloc>
                    </div>
                </div>
                <div class="btn_hero" data-bind="click: lose, click_sound: 'default', rollover_sound: 'default'">
                    <div class="btn_label">
                        <noloc>Lose</noloc>
                    </div>
                </div>
            </div>

            <div style="text-align:left">
                <div><loc data-i18n="gw_play:turn_state.message" desc="">Turn State:</loc><span data-bind="text: game().turnState"></span></div>
                <!-- ko with: selection.system().star  -->
                <div data-bind="visible: card">
                    <loc data-i18n="gw_play:card.message" desc="">Card:</loc> <span data-bind="text: JSON.stringify(card(), null, '\t')"></span><br />
                </div>
                <div data-bind="visible: history().length">
                    <loc data-i18n="gw_play:history.message" desc="">History:</loc> <span data-bind="text: JSON.stringify(history(), null, '\t')"></span><br />
                </div>
                <div data-bind="visible: ai">
                    <loc data-i18n="gw_play:ai.message" desc="">AI:</loc> <span data-bind="text: JSON.stringify(ai(), null, '\t')"></span><br />
                </div>
                <!-- /ko -->
                    <loc data-i18n="gw_play:date.message" desc="">Date:</loc> <span data-bind="text: game().stats().turns"></span> <br/>
                    <loc data-i18n="gw_play:record.message" desc="">Record:</loc> <span data-bind="text: game().stats().wins"></span> <loc data-i18n="gw_play:win.message" desc="">win /</loc> <span data-bind="text: game().stats().losses"></span> <loc data-i18n="gw_play:loss.message" desc="">loss</loc> <br/>
            </div>
        </div>
    </div>
    <!--End Testing-->
    
    <!--
       SETTINGS POPUP
       __________________________________________________________________________-->
    <panel id="settings" src="coui://ui/main/game/settings/settings.html" fit="dock" style="display: none" data-bind="visible: showSettings">
    </panel>
</div> <!-- container -->

<div id="fade"></div>
    
</body>
</html>
